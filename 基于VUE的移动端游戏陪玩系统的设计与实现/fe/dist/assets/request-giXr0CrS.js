const l="http://localhost:3002/api";async function d(t){const s=l.replace(/\/$/,"")+t.url,a=t.method||"GET",c=t.data||{},n=localStorage.getItem("token")||"",r={"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{},...t.header||{}},o=await fetch(s,{method:a,headers:r,body:a==="GET"?void 0:JSON.stringify(c)}),e=await o.json().catch(()=>({code:o.ok?200:o.status,msg:"Invalid JSON",data:null}));if(e.code===200)return e;throw console.error(e.msg||"请求失败"),e}export{d as r};
